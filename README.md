# mm-books
mind map books generator

prototype

Для работы скриптов необходимо поставить ImageMagic и xpdf.

Тестировалось на Ruby 2.1.7 и 2.2.5. Fedora 21 и 23.

PDF-файл перед конвертацией нужно переименовать, чтобы в названии были только английские буквы, пробелы заменить нижним подчеркиванием. Например, «diskurs_analiz.pdf», «exp_sys_gavrilova_horoshevski.pdf».

Скрипты написаны под Linux. Для других систем надежнее всего было бы запускать их в VirtualBox.

Команда генерации: ruby pages.rb pdf_book_name

«pdf_book_name» — это параметр скрипта pages.rb. Ваш PDF-файл должен лежать в той же директории, что и скрипты генерации и называться, соответственно, pdf_book_name.pdf. 

Важное замечание: если большая часть страниц в pdf-файле имеет одинаковые размеры, то mind map файл сгенерируется автоматически. Если в pdf-файле разнобой размеров страниц, то будет сгенерирована только директория с изображениями страниц книги, а mind map файл не будет сгенерирован. И вам надо будет заглянуть в файл логов «mmBooksGenErrorsLog.txt», чтобы вручную выполнить команду генерации mind map файла. 

В конце файла «mmBooksGenErrorsLog.txt» найдите строку вида «./import.rb pdf_book_name 354». «354» — это количество страниц в файле. «import.rb» имя скрипта, который генерирует mind map файл.

Потом посмотрите в файле «mmBooksGenErrorsLog.txt» предыдущую строку. Там будет что-то вроде «[[[1401, 2283], 50], [[1407, 2248], 33], [[1402, 2284], 31], .....». «[[1401, 2283], 50]» означает следующее: «1401, 2283» — это размер страниц по вертикали и горизонтали, «50» — количество страниц такого размера в файле. Выберите реалистичные размеры страницы и добавьте в конец команды «./import.rb pdf_book_name 354 1401, 2283». Да, после 1401 идет запятая. Так можно — чтобы было удобнее скопировать за один раз. Используйте средние размеры страниц по книге. PDF-файлы книг обычно имеют одинаковые размеры страниц, тогда скрипт будет справляться полностью самостоятельно.
